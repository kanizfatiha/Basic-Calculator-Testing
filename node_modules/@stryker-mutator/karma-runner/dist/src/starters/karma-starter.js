import { Task } from '@stryker-mutator/util';
import { strykerKarmaConfigPath } from '../karma-plugins/index.js';
import { karma } from '../karma-wrapper.js';
export const karmaConfigStarter = {
    async start() {
        const configFile = strykerKarmaConfigPath;
        let config = {
            configFile,
        };
        if (karma.config?.parseConfig) {
            config = await karma.config.parseConfig(configFile, {}, { promiseConfig: true, throwErrors: true });
        }
        const exitTask = new Task();
        await new karma.Server(config, exitTask.resolve).start();
        return {
            exitPromise: exitTask.promise,
        };
    },
};
//# sourceMappingURL=karma-starter.js.map